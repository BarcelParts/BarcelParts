{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.DropDatabaseOperation = exports.DropCollectionOperation = void 0;\n\nconst command_1 = require(\"./command\");\n\nconst operation_1 = require(\"./operation\");\n/** @internal */\n\n\nclass DropCollectionOperation extends command_1.CommandOperation {\n  constructor(db, name, options) {\n    super(db, options);\n    this.options = options;\n    this.name = name;\n  }\n\n  execute(server, session, callback) {\n    super.executeCommand(server, session, {\n      drop: this.name\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n\n}\n\nexports.DropCollectionOperation = DropCollectionOperation;\n/** @internal */\n\nclass DropDatabaseOperation extends command_1.CommandOperation {\n  constructor(db, options) {\n    super(db, options);\n    this.options = options;\n  }\n\n  execute(server, session, callback) {\n    super.executeCommand(server, session, {\n      dropDatabase: 1\n    }, (err, result) => {\n      if (err) return callback(err);\n      if (result.ok) return callback(undefined, true);\n      callback(undefined, false);\n    });\n  }\n\n}\n\nexports.DropDatabaseOperation = DropDatabaseOperation;\n(0, operation_1.defineAspects)(DropCollectionOperation, [operation_1.Aspect.WRITE_OPERATION]);\n(0, operation_1.defineAspects)(DropDatabaseOperation, [operation_1.Aspect.WRITE_OPERATION]);","map":{"version":3,"mappings":";;;;;;;AAIA;;AACA;AAKA;;;AACA,MAAaA,uBAAb,SAA6CC,0BAA7C,CAAsE;AAIpEC,cAAYC,EAAZ,EAAoBC,IAApB,EAAkCC,OAAlC,EAAgE;AAC9D,UAAMF,EAAN,EAAUE,OAAV;AACA,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKD,IAAL,GAAYA,IAAZ;AACD;;AAEQE,SAAO,CACdC,MADc,EAEdC,OAFc,EAGdC,QAHc,EAGa;AAE3B,UAAMC,cAAN,CAAqBH,MAArB,EAA6BC,OAA7B,EAAsC;AAAEG,UAAI,EAAE,KAAKP;AAAb,KAAtC,EAA2D,CAACQ,GAAD,EAAMC,MAAN,KAAgB;AACzE,UAAID,GAAJ,EAAS,OAAOH,QAAQ,CAACG,GAAD,CAAf;AACT,UAAIC,MAAM,CAACC,EAAX,EAAe,OAAOL,QAAQ,CAACM,SAAD,EAAY,IAAZ,CAAf;AACfN,cAAQ,CAACM,SAAD,EAAY,KAAZ,CAAR;AACD,KAJD;AAKD;;AApBmE;;AAAtEC;AA0BA;;AACA,MAAaC,qBAAb,SAA2ChB,0BAA3C,CAAoE;AAGlEC,cAAYC,EAAZ,EAAoBE,OAApB,EAAgD;AAC9C,UAAMF,EAAN,EAAUE,OAAV;AACA,SAAKA,OAAL,GAAeA,OAAf;AACD;;AACQC,SAAO,CACdC,MADc,EAEdC,OAFc,EAGdC,QAHc,EAGa;AAE3B,UAAMC,cAAN,CAAqBH,MAArB,EAA6BC,OAA7B,EAAsC;AAAEU,kBAAY,EAAE;AAAhB,KAAtC,EAA2D,CAACN,GAAD,EAAMC,MAAN,KAAgB;AACzE,UAAID,GAAJ,EAAS,OAAOH,QAAQ,CAACG,GAAD,CAAf;AACT,UAAIC,MAAM,CAACC,EAAX,EAAe,OAAOL,QAAQ,CAACM,SAAD,EAAY,IAAZ,CAAf;AACfN,cAAQ,CAACM,SAAD,EAAY,KAAZ,CAAR;AACD,KAJD;AAKD;;AAjBiE;;AAApEC;AAoBA,+BAAchB,uBAAd,EAAuC,CAACmB,mBAAOC,eAAR,CAAvC;AACA,+BAAcH,qBAAd,EAAqC,CAACE,mBAAOC,eAAR,CAArC","names":["DropCollectionOperation","command_1","constructor","db","name","options","execute","server","session","callback","executeCommand","drop","err","result","ok","undefined","exports","DropDatabaseOperation","dropDatabase","operation_1","WRITE_OPERATION"],"sources":["D:\\Barcelparts\\node_modules\\mongodb\\src\\operations\\drop.ts"],"sourcesContent":["import type { Db } from '../db';\r\nimport type { Server } from '../sdam/server';\r\nimport type { ClientSession } from '../sessions';\r\nimport type { Callback } from '../utils';\r\nimport { CommandOperation, CommandOperationOptions } from './command';\r\nimport { Aspect, defineAspects } from './operation';\r\n\r\n/** @public */\r\nexport type DropCollectionOptions = CommandOperationOptions;\r\n\r\n/** @internal */\r\nexport class DropCollectionOperation extends CommandOperation<boolean> {\r\n  override options: DropCollectionOptions;\r\n  name: string;\r\n\r\n  constructor(db: Db, name: string, options: DropCollectionOptions) {\r\n    super(db, options);\r\n    this.options = options;\r\n    this.name = name;\r\n  }\r\n\r\n  override execute(\r\n    server: Server,\r\n    session: ClientSession | undefined,\r\n    callback: Callback<boolean>\r\n  ): void {\r\n    super.executeCommand(server, session, { drop: this.name }, (err, result) => {\r\n      if (err) return callback(err);\r\n      if (result.ok) return callback(undefined, true);\r\n      callback(undefined, false);\r\n    });\r\n  }\r\n}\r\n\r\n/** @public */\r\nexport type DropDatabaseOptions = CommandOperationOptions;\r\n\r\n/** @internal */\r\nexport class DropDatabaseOperation extends CommandOperation<boolean> {\r\n  override options: DropDatabaseOptions;\r\n\r\n  constructor(db: Db, options: DropDatabaseOptions) {\r\n    super(db, options);\r\n    this.options = options;\r\n  }\r\n  override execute(\r\n    server: Server,\r\n    session: ClientSession | undefined,\r\n    callback: Callback<boolean>\r\n  ): void {\r\n    super.executeCommand(server, session, { dropDatabase: 1 }, (err, result) => {\r\n      if (err) return callback(err);\r\n      if (result.ok) return callback(undefined, true);\r\n      callback(undefined, false);\r\n    });\r\n  }\r\n}\r\n\r\ndefineAspects(DropCollectionOperation, [Aspect.WRITE_OPERATION]);\r\ndefineAspects(DropDatabaseOperation, [Aspect.WRITE_OPERATION]);\r\n"]},"metadata":{},"sourceType":"script"}