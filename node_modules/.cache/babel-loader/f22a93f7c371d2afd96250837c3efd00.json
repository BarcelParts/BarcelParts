{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WriteConcern = exports.WRITE_CONCERN_KEYS = void 0;\nexports.WRITE_CONCERN_KEYS = ['w', 'wtimeout', 'j', 'journal', 'fsync'];\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://docs.mongodb.com/manual/reference/write-concern/\n */\n\nclass WriteConcern {\n  /**\n   * Constructs a WriteConcern from the write concern properties.\n   * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n   * @param wtimeout - specify a time limit to prevent write operations from blocking indefinitely\n   * @param j - request acknowledgment that the write operation has been written to the on-disk journal\n   * @param fsync - equivalent to the j option\n   */\n  constructor(w, wtimeout, j, fsync) {\n    if (w != null) {\n      if (!Number.isNaN(Number(w))) {\n        this.w = Number(w);\n      } else {\n        this.w = w;\n      }\n    }\n\n    if (wtimeout != null) {\n      this.wtimeout = wtimeout;\n    }\n\n    if (j != null) {\n      this.j = j;\n    }\n\n    if (fsync != null) {\n      this.fsync = fsync;\n    }\n  }\n  /** Construct a WriteConcern given an options object. */\n\n\n  static fromOptions(options, inherit) {\n    if (options == null) return undefined;\n    inherit = inherit !== null && inherit !== void 0 ? inherit : {};\n    let opts;\n\n    if (typeof options === 'string' || typeof options === 'number') {\n      opts = {\n        w: options\n      };\n    } else if (options instanceof WriteConcern) {\n      opts = options;\n    } else {\n      opts = options.writeConcern;\n    }\n\n    const parentOpts = inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n    const {\n      w = undefined,\n      wtimeout = undefined,\n      j = undefined,\n      fsync = undefined,\n      journal = undefined,\n      wtimeoutMS = undefined\n    } = { ...parentOpts,\n      ...opts\n    };\n\n    if (w != null || wtimeout != null || wtimeoutMS != null || j != null || journal != null || fsync != null) {\n      return new WriteConcern(w, wtimeout !== null && wtimeout !== void 0 ? wtimeout : wtimeoutMS, j !== null && j !== void 0 ? j : journal, fsync);\n    }\n\n    return undefined;\n  }\n\n}\n\nexports.WriteConcern = WriteConcern;","map":{"version":3,"mappings":";;;;;;AA2BaA,6BAAqB,CAAC,GAAD,EAAM,UAAN,EAAkB,GAAlB,EAAuB,SAAvB,EAAkC,OAAlC,CAArB;AAEb;;;;;;;;AAOA,MAAaC,YAAb,CAAyB;AAUvB;;;;;;;AAOAC,cAAYC,CAAZ,EAAmBC,QAAnB,EAAsCC,CAAtC,EAAmDC,KAAnD,EAAsE;AACpE,QAAIH,CAAC,IAAI,IAAT,EAAe;AACb,UAAI,CAACI,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACJ,CAAD,CAAnB,CAAL,EAA8B;AAC5B,aAAKA,CAAL,GAASI,MAAM,CAACJ,CAAD,CAAf;AACD,OAFD,MAEO;AACL,aAAKA,CAAL,GAASA,CAAT;AACD;AACF;;AACD,QAAIC,QAAQ,IAAI,IAAhB,EAAsB;AACpB,WAAKA,QAAL,GAAgBA,QAAhB;AACD;;AACD,QAAIC,CAAC,IAAI,IAAT,EAAe;AACb,WAAKA,CAAL,GAASA,CAAT;AACD;;AACD,QAAIC,KAAK,IAAI,IAAb,EAAmB;AACjB,WAAKA,KAAL,GAAaA,KAAb;AACD;AACF;AAED;;;AACkB,SAAXG,WAAW,CAChBC,OADgB,EAEhBC,OAFgB,EAE4B;AAE5C,QAAID,OAAO,IAAI,IAAf,EAAqB,OAAOE,SAAP;AACrBD,WAAO,GAAGA,OAAO,SAAP,WAAO,WAAP,aAAW,EAArB;AACA,QAAIE,IAAJ;;AACA,QAAI,OAAOH,OAAP,KAAmB,QAAnB,IAA+B,OAAOA,OAAP,KAAmB,QAAtD,EAAgE;AAC9DG,UAAI,GAAG;AAAEV,SAAC,EAAEO;AAAL,OAAP;AACD,KAFD,MAEO,IAAIA,OAAO,YAAYT,YAAvB,EAAqC;AAC1CY,UAAI,GAAGH,OAAP;AACD,KAFM,MAEA;AACLG,UAAI,GAAGH,OAAO,CAACI,YAAf;AACD;;AACD,UAAMC,UAAU,GACdJ,OAAO,YAAYV,YAAnB,GAAkCU,OAAlC,GAA4CA,OAAO,CAACG,YADtD;AAGA,UAAM;AACJX,OAAC,GAAGS,SADA;AAEJR,cAAQ,GAAGQ,SAFP;AAGJP,OAAC,GAAGO,SAHA;AAIJN,WAAK,GAAGM,SAJJ;AAKJI,aAAO,GAAGJ,SALN;AAMJK,gBAAU,GAAGL;AANT,QAOF,EACF,GAAGG,UADD;AAEF,SAAGF;AAFD,KAPJ;;AAWA,QACEV,CAAC,IAAI,IAAL,IACAC,QAAQ,IAAI,IADZ,IAEAa,UAAU,IAAI,IAFd,IAGAZ,CAAC,IAAI,IAHL,IAIAW,OAAO,IAAI,IAJX,IAKAV,KAAK,IAAI,IANX,EAOE;AACA,aAAO,IAAIL,YAAJ,CAAiBE,CAAjB,EAAoBC,QAAQ,SAAR,YAAQ,WAAR,cAAYa,UAAhC,EAA4CZ,CAAC,SAAD,KAAC,WAAD,OAAKW,OAAjD,EAA0DV,KAA1D,CAAP;AACD;;AACD,WAAOM,SAAP;AACD;;AA5EsB;;AAAzBZ","names":["exports","WriteConcern","constructor","w","wtimeout","j","fsync","Number","isNaN","fromOptions","options","inherit","undefined","opts","writeConcern","parentOpts","journal","wtimeoutMS"],"sources":["D:\\Barcelparts\\node_modules\\mongodb\\src\\write_concern.ts"],"sourcesContent":["/** @public */\nexport type W = number | 'majority';\n\n/** @public */\nexport interface WriteConcernOptions {\n  /** Write Concern as an object */\n  writeConcern?: WriteConcern | WriteConcernSettings;\n}\n\n/** @public */\nexport interface WriteConcernSettings {\n  /** The write concern */\n  w?: W;\n  /** The write concern timeout */\n  wtimeoutMS?: number;\n  /** The journal write concern */\n  journal?: boolean;\n\n  // legacy options\n  /** The journal write concern */\n  j?: boolean;\n  /** The write concern timeout */\n  wtimeout?: number;\n  /** The file sync write concern */\n  fsync?: boolean | 1;\n}\n\nexport const WRITE_CONCERN_KEYS = ['w', 'wtimeout', 'j', 'journal', 'fsync'];\n\n/**\n * A MongoDB WriteConcern, which describes the level of acknowledgement\n * requested from MongoDB for write operations.\n * @public\n *\n * @see https://docs.mongodb.com/manual/reference/write-concern/\n */\nexport class WriteConcern {\n  /** request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags. */\n  w?: W;\n  /** specify a time limit to prevent write operations from blocking indefinitely */\n  wtimeout?: number;\n  /** request acknowledgment that the write operation has been written to the on-disk journal */\n  j?: boolean;\n  /** equivalent to the j option */\n  fsync?: boolean | 1;\n\n  /**\n   * Constructs a WriteConcern from the write concern properties.\n   * @param w - request acknowledgment that the write operation has propagated to a specified number of mongod instances or to mongod instances with specified tags.\n   * @param wtimeout - specify a time limit to prevent write operations from blocking indefinitely\n   * @param j - request acknowledgment that the write operation has been written to the on-disk journal\n   * @param fsync - equivalent to the j option\n   */\n  constructor(w?: W, wtimeout?: number, j?: boolean, fsync?: boolean | 1) {\n    if (w != null) {\n      if (!Number.isNaN(Number(w))) {\n        this.w = Number(w);\n      } else {\n        this.w = w;\n      }\n    }\n    if (wtimeout != null) {\n      this.wtimeout = wtimeout;\n    }\n    if (j != null) {\n      this.j = j;\n    }\n    if (fsync != null) {\n      this.fsync = fsync;\n    }\n  }\n\n  /** Construct a WriteConcern given an options object. */\n  static fromOptions(\n    options?: WriteConcernOptions | WriteConcern | W,\n    inherit?: WriteConcernOptions | WriteConcern\n  ): WriteConcern | undefined {\n    if (options == null) return undefined;\n    inherit = inherit ?? {};\n    let opts: WriteConcernSettings | WriteConcern | undefined;\n    if (typeof options === 'string' || typeof options === 'number') {\n      opts = { w: options };\n    } else if (options instanceof WriteConcern) {\n      opts = options;\n    } else {\n      opts = options.writeConcern;\n    }\n    const parentOpts: WriteConcern | WriteConcernSettings | undefined =\n      inherit instanceof WriteConcern ? inherit : inherit.writeConcern;\n\n    const {\n      w = undefined,\n      wtimeout = undefined,\n      j = undefined,\n      fsync = undefined,\n      journal = undefined,\n      wtimeoutMS = undefined\n    } = {\n      ...parentOpts,\n      ...opts\n    };\n    if (\n      w != null ||\n      wtimeout != null ||\n      wtimeoutMS != null ||\n      j != null ||\n      journal != null ||\n      fsync != null\n    ) {\n      return new WriteConcern(w, wtimeout ?? wtimeoutMS, j ?? journal, fsync);\n    }\n    return undefined;\n  }\n}\n"]},"metadata":{},"sourceType":"script"}